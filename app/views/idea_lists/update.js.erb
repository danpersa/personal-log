var el = $('#edit_idea_list');
<% if @idea_list.errors.any? %>

  // Create a list of errors
  var errors = $('<div/>');

  <% @idea_list.errors.keys.each do |field_error_key| %>
    <% @idea_list.errors[field_error_key].each do |error| %>
      errors.append('<%= escape_javascript(error) %><br/>');
    <% end %>
    updateErrors(el, '<%=field_error_key%>', 'edit_idea_list_', errors)
  <% end %>

<% else %>

  addNotificationSuccess("Idea list successfully updated");

  // We could also render a partial to display the idea list here
  $('#idea-list-<%=@idea_list.id%>').html('<%= escape_javascript(render(:partial => "idea_list_content", :object => @idea_list, :as => :idea_list)) %>');

  $("button, input:submit").button();
  // Clear form
  el.find('input:text,textarea').val('');
  el.find('.errors').empty();
  $("#edit-idea-list-dialog-form").dialog( "close" );
<% end %>